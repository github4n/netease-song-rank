<?xml version="1.0" encoding="UTF-8"?>
        <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="me.olook.netease.song.rank.mapper.TimerJobMapper">

    <select id="findExpiredTimerJob" resultMap="timerJobMap">
          SELECT * from song_rank_job where  ((DATEDIFF(NOW(),upd_time) > #{dayDiff}) or upd_time is null)
          and job_group = 'group1' and `status` = '1'
    </select>
    <resultMap id="timerJobMap" type="me.olook.netease.song.rank.entity.TimerJob">
        <id column="id" property="id"/>
        <result column="job_name" property="jobName"/>
        <result column="job_group" property="jobGroup"/>
        <result column="status" property="status"/>
        <result column="del_flag" property="delDlag"/>
    </resultMap>
</mapper>